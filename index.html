<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>順德龍山同鄉會</title>
    <script src="https://cdn.tailwindcss.com/3.3.3"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', 'Microsoft JhengHei', sans-serif;
            background-color: #F5F5F5;
            color: #333333;
        }
        
        .text-primary { color: #C8102E; }
        .bg-primary { background-color: #C8102E; }
        .text-secondary { color: #DAA520; }
        .bg-secondary { background-color: #DAA520; }
        
        .hero-slide {
            height: 500px;
            background-size: cover;
            background-position: center;
            transition: background-image 1.0s ease-in-out;
        }
        
        /* 文字淡入淡出效果 */
        .hero-text {
            opacity: 1;
            transition: opacity 0.5s ease-in-out;
        }
        .hero-text.fade-out {
            opacity: 0;
            transition: opacity 0.1s;
        }
        
        /* 輪播指示器樣式 */
        .indicator {
            width: 10px;
            height: 10px;
            background-color: rgba(255, 255, 255, 0.5); /* 半透明白色 */
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.3s, width 0.3s, border-radius 0.3s;
        }
        .indicator.active {
            background-color: #DAA520; /* 活躍時變成金色 */
            width: 30px; /* 變長 */
            border-radius: 5px; /* 變成橫槓 */
        }

        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .gallery-item {
            height: 200px;
            background-size: cover;
            background-position: center;
        }
        
        .mobile-menu {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        .mobile-menu.active { max-height: 500px; }

        /* --- 活動詳情彈窗樣式 (新增) --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: none; /* 預設隱藏 */
            justify-content: center;
            align-items: center;
            z-index: 1000;
            overflow-y: auto; 
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .modal-content {
            background-color: white;
            color: #333;
            padding: 2rem;
            border-radius: 8px;
            max-width: 90%;
            width: 700px;
            max-height: 90vh; 
            overflow-y: auto;
            position: relative;
            transform: scale(0.95) translateY(20px); /* 初始位置略小且往下 */
            transition: transform 0.3s ease-out, opacity 0.3s ease-out;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }
        .modal-overlay.active .modal-content {
            transform: scale(1) translateY(0);
        }
    </style>
</head>
<body>
    <header class="bg-primary text-white shadow-md">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center">
                <div id="logo-container" class="w-12 h-12 rounded-full bg-white flex items-center justify-center mr-3 overflow-hidden">
                    <i class="fas fa-landmark text-primary text-xl"></i>
                </div>
                <h1 class="text-xl font-bold">順德龍山同鄉會</h1>
            </div>
            
            <nav class="hidden md:flex space-x-6">
                <a href="#home" class="hover:text-secondary">首頁</a>
                <a href="#about" class="hover:text-secondary">關於本會</a>
                <a href="#news" class="hover:text-secondary">本會動態</a>
                <a href="#membership" class="hover:text-secondary">會員專區</a>
                <a href="#gallery" class="hover:text-secondary">龍山風采</a>
                <a href="#contact" class="hover:text-secondary">聯繫我們</a>
            </nav>
            
            <button id="mobileMenuButton" class="md:hidden text-white focus:outline-none">
                <i class="fas fa-bars text-2xl"></i>
            </button>
        </div>
        
        <div id="mobileMenu" class="mobile-menu bg-primary md:hidden">
            <div class="container mx-auto px-4 py-3 flex flex-col space-y-3">
                <a href="#home" class="hover:text-secondary py-2">首頁</a>
                <a href="#about" class="hover:text-secondary py-2">關於本會</a>
                <a href="#news" class="hover:text-secondary py-2">本會動態</a>
                <a href="#membership" class="hover:text-secondary py-2">會員專區</a>
                <a href="#gallery" class="hover:text-secondary py-2">龍山風采</a>
                <a href="#contact" class="hover:text-secondary py-2">聯繫我們</a>
            </div>
        </div>
    </header>

    <section id="home" class="relative">
        <div id="hero-slide" class="hero-slide">
            <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
                <div id="hero-text-container" class="text-center text-white px-4 hero-text">
                    <h2 id="hero-title" class="text-4xl md:text-5xl font-bold mb-4"></h2>
                    <p id="hero-subtitle" class="text-xl"></p>
                </div>
            </div>
        </div>
        <div class="absolute bottom-4 left-0 right-0 flex justify-center space-x-3" id="hero-indicators"></div>
    </section>

    <section class="bg-white py-12">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-primary mb-8 text-center">會長獻辭</h2>
            
            <div class="flex flex-col md:flex-row items-center">
                <div class="md:w-1/3 mb-6 md:mb-0">
                    <img id="president-photo" src="" alt="會長照片" class="rounded-lg shadow-lg w-full">
                </div>
                
                <div class="md:w-2/3 md:pl-8">
                    <h3 class="text-2xl font-semibold text-primary mb-4">尊敬的各位鄉親：</h3>
                    <div id="president-text"></div>
                    <p id="president-sign" class="text-primary font-semibold mt-6"></p>
                </div>
            </div>
        </div>
    </section>

    <section id="news" class="py-12 bg-gray-50">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-primary mb-8 text-center">本會動態</h2>
            <div id="news-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            <div class="text-center mt-8">
                <a href="#" class="inline-block bg-primary text-white px-6 py-3 rounded-md hover:bg-opacity-90 transition">查看更多動態</a>
            </div>
        </div>
    </section>

    <section id="gallery" class="py-12 bg-white">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-primary mb-8 text-center">龍山風采</h2>
            <div id="gallery-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
            <div class="text-center mt-8">
                <a href="#" class="inline-block bg-primary text-white px-6 py-3 rounded-md hover:bg-opacity-90 transition">瀏覽更多風采</a>
            </div>
        </div>
    </section>

    <section id="about" class="py-12 bg-gray-50">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-primary mb-8 text-center">關於本會</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-2xl font-semibold text-primary mb-4">本會簡介</h3>
                    <p class="text-gray-700 mb-4 leading-relaxed">順德龍山同鄉會成立於1985年，是由龍山籍鄉親自發組成的非營利性社會團體。經過近40年的發展，現已成為聯繫全球龍山鄉親的重要紐帶。</p>
                    <p class="text-gray-700 mb-4 leading-relaxed">本會以"團結鄉親、服務鄉親、造福鄉親"為宗旨，致力於傳承龍山文化，促進家鄉發展，為鄉親提供交流合作平台。</p>
                    <p class="text-gray-700 leading-relaxed">目前，同鄉會在全球設有12個分會，會員人數超過5000人，每年舉辦各類文化、聯誼、公益活動30餘場。</p>
                </div>
                <div>
                    <h3 class="text-2xl font-semibold text-primary mb-4">組織架構</h3>
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <div class="mb-4">
                            <h4 class="text-lg font-medium text-primary mb-2">理事會</h4>
                            <p class="text-gray-600">會長：張大山</p>
                            <p class="text-gray-600">副會長：李小明、陳大華、黃小紅</p>
                        </div>
                        <div class="mb-4">
                            <h4 class="text-lg font-medium text-primary mb-2">監事會</h4>
                            <p class="text-gray-600">監事長：王大明</p>
                            <p class="text-gray-600">監事：趙小剛、劉小麗</p>
                        </div>
                        <div>
                            <h4 class="text-lg font-medium text-primary mb-2">各委員會</h4>
                            <p class="text-gray-600">文化委員會、聯誼委員會、公益委員會、青年委員會</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="membership" class="py-12 bg-white">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-primary mb-8 text-center">會員專區</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-gray-50 p-6 rounded-lg">
                    <h3 class="text-2xl font-semibold text-primary mb-4">入會指南</h3>
                    <p class="text-gray-700 mb-4">歡迎符合以下條件的鄉親加入本會：</p>
                    <ul class="list-disc pl-5 text-gray-700 mb-4 space-y-2">
                        <li>年滿18周歲</li>
                        <li>本人或直系親屬為龍山籍</li>
                        <li>認同本會章程</li>
                    </ul>
                    <p class="text-gray-700 mb-4">入會流程：</p>
                    <ol class="list-decimal pl-5 text-gray-700 mb-6 space-y-2">
                        <li>填寫入會申請表</li>
                        <li>提交身份證明及戶籍證明</li>
                        <li>繳納會費</li>
                        <li>理事會審核通過</li>
                    </ol>
                    <a href="https://hklongshan.github.io/LSruhui/" target="_blank" class="inline-block bg-primary text-white px-6 py-2 rounded-md hover:bg-opacity-90 transition">下載申請表格</a>
                </div>
                <div class="bg-gray-50 p-6 rounded-lg">
                    <h3 class="text-2xl font-semibold text-primary mb-4">會員福利</h3>
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <div class="bg-secondary text-white rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 mr-3"><i class="fas fa-ticket-alt"></i></div>
                            <div><h4 class="font-medium text-gray-800">活動優先參與權</h4><p class="text-gray-600 text-sm">可優先報名參加同鄉會舉辦的各類文化、聯誼活動</p></div>
                        </div>
                        <div class="flex items-start">
                            <div class="bg-secondary text-white rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 mr-3"><i class="fas fa-percent"></i></div>
                            <div><h4 class="font-medium text-gray-800">商業折扣</h4><p class="text-gray-600 text-sm">享受會員企業提供的專屬折扣和優惠</p></div>
                        </div>
                        <div class="flex items-start">
                            <div class="bg-secondary text-white rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 mr-3"><i class="fas fa-gavel"></i></div>
                            <div><h4 class="font-medium text-gray-800">法律諮詢服務</h4><p class="text-gray-600 text-sm">免費享受專業法律顧問提供的基礎法律諮詢</p></div>
                        </div>
                        <div class="flex items-start">
                            <div class="bg-secondary text-white rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 mr-3"><i class="fas fa-book"></i></div>
                            <div><h4 class="font-medium text-gray-800">文化資源</h4><p class="text-gray-600 text-sm">免費獲取龍山文化研究資料和出版物</p></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="contact" class="py-12 bg-primary text-white">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold mb-8 text-center">聯繫我們</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-xl font-semibold mb-4">聯繫資訊</h3>
                    <div class="space-y-3" id="contact-info-list"></div>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-4">微信公眾號</h3>
                    <div class="bg-white p-4 rounded-lg inline-block">
                        <img id="contact-qrcode" src="" alt="微信公眾號" class="w-32 h-32">
                    </div>
                    <p class="mt-3">掃描二維碼關注我們</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-4">在線留言</h3>
                    <form>
                        <div class="mb-4"><input type="text" placeholder="您的姓名" class="w-full px-4 py-2 rounded-md bg-white bg-opacity-20 border border-white border-opacity-30 placeholder-white placeholder-opacity-70 focus:outline-none focus:ring-2 focus:ring-secondary"></div>
                        <div class="mb-4"><input type="email" placeholder="電子郵箱" class="w-full px-4 py-2 rounded-md bg-white bg-opacity-20 border border-white border-opacity-30 placeholder-white placeholder-opacity-70 focus:outline-none focus:ring-2 focus:ring-secondary"></div>
                        <div class="mb-4"><input type="tel" placeholder="電話號碼" class="w-full px-4 py-2 rounded-md bg-white bg-opacity-20 border border-white border-opacity-30 placeholder-white placeholder-opacity-70 focus:outline-none focus:ring-2 focus:ring-secondary"></div>
                        <div class="mb-4"><textarea placeholder="您的留言" rows="3" class="w-full px-4 py-2 rounded-md bg-white bg-opacity-20 border border-white border-opacity-30 placeholder-white placeholder-opacity-70 focus:outline-none focus:ring-2 focus:ring-secondary"></textarea></div>
                        <button type="submit" class="bg-secondary text-white px-6 py-2 rounded-md hover:bg-opacity-90 transition">提交留言</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-gray-900 text-white py-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <p>© <span id="copyright-year"></span> <span id="footer-name"></span> 版權所有</p>
                </div>
                <div>
                    <a href="https://space.coze.cn" class="text-gray-300 hover:text-white transition">Designed by Coze</a>
                </div>
            </div>
        </div>
    </footer>

    <div id="news-modal-overlay" class="modal-overlay">
        <div id="news-modal-content" class="modal-content">
            <button id="close-modal-btn" class="absolute top-4 right-4 text-3xl font-light text-gray-500 hover:text-primary transition focus:outline-none" aria-label="Close">&times;</button>
            <h3 id="modal-title" class="text-3xl font-bold text-primary mb-4"></h3>
            <p id="modal-date" class="text-secondary text-sm mb-4"></p>
            <div id="modal-content-text" class="text-gray-700 whitespace-pre-wrap leading-relaxed mb-6"></div>
            
            <h4 class="text-xl font-semibold text-primary mb-3">活動照片</h4>
            <div id="modal-gallery" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                </div>
        </div>
    </div>
    <script src="data.js"></script>
    <script>
        
        // --- 0. 全局變量 (輪播相關) ---
        const hero = document.getElementById('hero-slide');
        const heroTextContainer = document.getElementById('hero-text-container');
        const heroTitle = document.getElementById('hero-title');
        const heroSubtitle = document.getElementById('hero-subtitle');
        const indicatorContainer = document.getElementById('hero-indicators');
        const slides = siteData.hero.slides;
        let currentSlide = 0;
        let slideInterval;
        const intervalTime = 5200; 
        
        // --- 全局變量 (活動彈窗相關) ---
        const newsModalOverlay = document.getElementById('news-modal-overlay');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const modalTitle = document.getElementById('modal-title');
        const modalDate = document.getElementById('modal-date');
        const modalContentText = document.getElementById('modal-content-text');
        const modalGallery = document.getElementById('modal-gallery');


        // --- 核心函數：切換幻燈片 (不變) ---
        function switchSlide(index) {
            clearInterval(slideInterval);
            currentSlide = index;
            const currentData = slides[currentSlide];
            heroTextContainer.classList.add('fade-out');

            setTimeout(() => {
                hero.style.backgroundImage = `url('${currentData.image}')`;
            }, 100);
            
            setTimeout(() => {
                heroTitle.innerText = currentData.title;
                heroSubtitle.innerText = currentData.subtitle;
                heroTextContainer.classList.remove('fade-out');
                updateIndicators();
            }, 300);

            slideInterval = setInterval(() => {
                let nextSlide = (currentSlide + 1) % slides.length;
                switchSlide(nextSlide);
            }, intervalTime);
        }

        function updateIndicators() {
            document.querySelectorAll('.indicator').forEach((dot, index) => {
                if (index === currentSlide) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }

        function createIndicators() {
            indicatorContainer.innerHTML = '';
            slides.forEach((_, index) => {
                const dot = document.createElement('div');
                dot.className = 'indicator';
                dot.addEventListener('click', () => switchSlide(index)); 
                indicatorContainer.appendChild(dot);
            });
        }

        // --- 核心函數：活動彈窗邏輯 (新增) ---
        
        // 根據 ID 打開彈窗
        function openNewsModal(newsId) {
            const item = siteData.news.find(n => n.id === newsId);
            if (!item) return;

            // 1. 填充內容
            modalTitle.innerText = item.title;
            modalDate.innerText = `活動日期：${item.date}`;
            modalContentText.innerText = item.content; // 使用 innerText 避免 XSS
            
            // 2. 填充圖片
            modalGallery.innerHTML = '';
            item.detailImages.forEach(imgUrl => {
                const img = document.createElement('img');
                img.src = imgUrl;
                img.alt = item.title;
                img.className = 'w-full h-auto rounded-lg shadow-md object-cover';
                modalGallery.appendChild(img);
            });

            // 3. 顯示彈窗
            newsModalOverlay.classList.add('active');
            // 阻止背景滾動
            document.body.style.overflow = 'hidden'; 
        }

        // 關閉彈窗
        function closeNewsModal() {
            newsModalOverlay.classList.remove('active');
            // 恢復背景滾動
            document.body.style.overflow = 'auto'; 
        }

        // 綁定關閉事件
        closeModalBtn.addEventListener('click', closeNewsModal);
        
        // 點擊背景遮罩時關閉彈窗
        newsModalOverlay.addEventListener('click', function(e) {
            if (e.target === newsModalOverlay) {
                closeNewsModal();
            }
        });
        
        // --- 初始化頁面 ---
        
        // 0. 渲染 Logo
        if (siteData.basic.logo) {
            const logoContainer = document.getElementById('logo-container');
            logoContainer.innerHTML = `<img src="${siteData.basic.logo}" alt="Logo" class="w-full h-full object-cover">`;
        }

        // 1. 輪播初始化
        createIndicators(); 
        switchSlide(0);     

        // 2. 渲染会长献辞 (不變)
        document.getElementById('president-photo').src = siteData.president.photo;
        document.getElementById('president-sign').innerText = `${siteData.president.title} ${siteData.president.name}`;
        const presidentTextContainer = document.getElementById('president-text');
        siteData.president.paragraphs.forEach(para => {
            const p = document.createElement('p');
            p.className = 'text-gray-700 mb-4 leading-relaxed';
            p.innerText = para;
            presidentTextContainer.appendChild(p);
        });

        // 3. 渲染新聞動態 (修改：增加點擊事件)
        const newsGrid = document.getElementById('news-grid');
        siteData.news.forEach(item => {
            const card = document.createElement('div');
            // 加上 cursor-pointer，並綁定點擊事件
            card.className = 'bg-white rounded-lg shadow-md overflow-hidden card-hover cursor-pointer'; 
            card.setAttribute('onclick', `openNewsModal(${item.id})`); // 點擊時打開彈窗

            // 移除原有的 a href 連結
            card.innerHTML = `
                <div class="h-48 bg-cover bg-center" style="background-image: url('${item.image}')"></div>
                <div class="p-6">
                    <div class="text-secondary text-sm mb-2">${item.date}</div>
                    <h3 class="text-xl font-semibold text-primary mb-3">${item.title}</h3>
                    <p class="text-gray-600 mb-4">${item.summary}</p>
                    <span class="text-primary font-medium hover:underline">查看詳情 &rarr;</span>
                </div>
            `;
            newsGrid.appendChild(card);
        });

        // 4. 渲染相册 (不變)
        const galleryGrid = document.getElementById('gallery-grid');
        siteData.gallery.forEach(imgUrl => {
            const item = document.createElement('div');
            item.className = 'gallery-item rounded-lg';
            item.style.backgroundImage = `url('${imgUrl}')`;
            galleryGrid.appendChild(item);
        });

        // 5. 渲染联系方式列表 (不變)
        const contactList = document.getElementById('contact-info-list');
        const contactIcons = {
            address: 'map-marker-alt',
            phone: 'phone-alt',
            fax: 'fax',
            email: 'envelope',
            hours: 'clock'
        };
        const keys = ['address', 'phone', 'fax', 'email', 'hours'];
        keys.forEach(key => {
            if(siteData.contact[key]) {
                const div = document.createElement('div');
                div.className = 'flex items-start';
                div.innerHTML = `
                    <i class="fas fa-${contactIcons[key]} mt-1 mr-3 text-secondary"></i>
                    <p>${siteData.contact[key]}</p>
                `;
                contactList.appendChild(div);
            }
        });
        document.getElementById('contact-qrcode').src = siteData.contact.qrCode;

        // 6. 渲染页脚 (不變)
        document.getElementById('copyright-year').innerText = siteData.basic.copyrightYear;
        document.getElementById('footer-name').innerText = siteData.basic.name;

        // 7. 菜單和滾動邏輯 (不變)
        document.getElementById('mobileMenuButton').addEventListener('click', function() {
            document.getElementById('mobileMenu').classList.toggle('active');
            this.querySelector('i').classList.toggle('fa-bars');
            this.querySelector('i').classList.toggle('fa-times');
        });

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80,
                        behavior: 'smooth'
                    });
                    if (document.getElementById('mobileMenu').classList.contains('active')) {
                        document.getElementById('mobileMenu').classList.remove('active');
                        document.getElementById('mobileMenuButton').querySelector('i').classList.remove('fa-times');
                        document.getElementById('mobileMenuButton').querySelector('i').classList.add('fa-bars');
                    }
                }
            });
        });
        
        window.addEventListener('scroll', function() {
            const header = document.querySelector('header');
            if (window.scrollY > 100) {
                header.classList.add('shadow-lg');
            } else {
                header.classList.remove('shadow-lg');
            }
        });
    </script>
</body>
</html>
